@(enabled: Boolean = false, converter: org.graylog2.restclient.models.Converter = null)
@import org.graylog2.restclient.lib.DateTools
@import com.google.common.collect.ImmutableList

<div class="xtrc-converter xtrc-converter-date" @if(!enabled) { style="display:none;" } >
    <div class="form-group">
        <div class="col-md-offset-2 col-md-10">
            <div class="checkbox">
                <label>
                    <input type="checkbox" value="enabled" name="converter_date" @if(enabled) {
                        checked="checked" } />
                    Convert to date type
                </label>
            </div>
        </div>
    </div>

    <div class="col-md-offset-2 col-md-9">
        <div class="row row-sm">
            <div class="xtrc-converter-subfields">
                <div class="form-group">
                    <label for="converter_date_format">Format string</label>
                    <div class="row row-sm">
                        <div class="col-md-10">
                            <input name="converter_date_format" id="converter_date_format"
                            type="text" placeholder="yyyy-MM-dd HH:mm:ss.SSS" class="form-control"
                                @if(converter != null) { value="@converter.getConfig.get("date_format")" } />
                            <span class="help-block">
                                String format the date uses. Read more in the @views.html.partials.links.docs(views.helpers.DocsHelper.PAGE_STANDARD_DATE_CONVERTER, "documentation")
                            </span>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="converter_date_time_zone">Time zone</label>
                    <div class="row row-sm">
                        <div class="col-md-10">
                            <select name="converter_date_time_zone" id="converter_date_time_zone"
                            data-placeholder="Pick a time zone" class="timezone-select">
                            @defining(DateTools.getGroupedTimezoneIds.asMap()) { timeZones =>
                                @for(group <- ImmutableList.copyOf(timeZones.keys).sorted) {
                                    <option></option>
                                    <optgroup label="@group">
                                    @for(zone <- ImmutableList.copyOf(timeZones.get(group).iterator()).sorted) {
                                        <option value="@group/@zone" @if(converter != null && (group + "/" + zone).equals(converter.getConfig.get("time_zone"))) {selected}>@zone </option>
                                    }
                                    </optgroup>
                                }
                            }
                            </select>
                            <span class="help-block">
                                Time zone to apply to date. Read more in the @views.html.partials.links.docs(views.helpers.DocsHelper.PAGE_STANDARD_DATE_CONVERTER, "documentation")
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>